<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>http-proxy-middleware | å°è¿¹</title>
    <meta name="description" content="å­—èŠ‚ç ç‘">
    
    
    <link rel="preload" href="/assets/css/0.styles.b4651a08.css" as="style"><link rel="preload" href="/assets/js/app.00dc6386.js" as="script"><link rel="preload" href="/assets/js/2.bcfa727d.js" as="script"><link rel="preload" href="/assets/js/79.7672e30b.js" as="script"><link rel="prefetch" href="/assets/js/10.44f17d83.js"><link rel="prefetch" href="/assets/js/100.007adcc8.js"><link rel="prefetch" href="/assets/js/101.3ae0c688.js"><link rel="prefetch" href="/assets/js/102.c70926c1.js"><link rel="prefetch" href="/assets/js/103.09c199f9.js"><link rel="prefetch" href="/assets/js/104.3a069d2a.js"><link rel="prefetch" href="/assets/js/105.89402e3a.js"><link rel="prefetch" href="/assets/js/106.928b68cb.js"><link rel="prefetch" href="/assets/js/107.29ca6b0b.js"><link rel="prefetch" href="/assets/js/108.632c531d.js"><link rel="prefetch" href="/assets/js/109.706b6faf.js"><link rel="prefetch" href="/assets/js/11.b8c7aafd.js"><link rel="prefetch" href="/assets/js/110.4e2a00f3.js"><link rel="prefetch" href="/assets/js/111.9f089445.js"><link rel="prefetch" href="/assets/js/112.685e329f.js"><link rel="prefetch" href="/assets/js/113.e8904a9a.js"><link rel="prefetch" href="/assets/js/114.9313d762.js"><link rel="prefetch" href="/assets/js/115.a7fddac3.js"><link rel="prefetch" href="/assets/js/116.19d6600d.js"><link rel="prefetch" href="/assets/js/117.03f8de7a.js"><link rel="prefetch" href="/assets/js/118.44e2bf35.js"><link rel="prefetch" href="/assets/js/119.d40e936f.js"><link rel="prefetch" href="/assets/js/12.e594e248.js"><link rel="prefetch" href="/assets/js/120.cc414e7e.js"><link rel="prefetch" href="/assets/js/121.d4bab4db.js"><link rel="prefetch" href="/assets/js/122.8bbb2d23.js"><link rel="prefetch" href="/assets/js/123.0b10f6ac.js"><link rel="prefetch" href="/assets/js/124.fc25b0ac.js"><link rel="prefetch" href="/assets/js/125.10359ebd.js"><link rel="prefetch" href="/assets/js/126.55f1085b.js"><link rel="prefetch" href="/assets/js/127.bc54f7cd.js"><link rel="prefetch" href="/assets/js/128.be971c8c.js"><link rel="prefetch" href="/assets/js/129.ee6415d6.js"><link rel="prefetch" href="/assets/js/13.71d0984c.js"><link rel="prefetch" href="/assets/js/130.3a072c4b.js"><link rel="prefetch" href="/assets/js/131.2790727f.js"><link rel="prefetch" href="/assets/js/132.355f46a3.js"><link rel="prefetch" href="/assets/js/133.cd36f652.js"><link rel="prefetch" href="/assets/js/134.d8e6f8ed.js"><link rel="prefetch" href="/assets/js/135.f43bf42a.js"><link rel="prefetch" href="/assets/js/136.cef41ceb.js"><link rel="prefetch" href="/assets/js/137.a7c78bd6.js"><link rel="prefetch" href="/assets/js/138.7c0f373a.js"><link rel="prefetch" href="/assets/js/139.992b33b0.js"><link rel="prefetch" href="/assets/js/14.e20baa0a.js"><link rel="prefetch" href="/assets/js/140.b06a878b.js"><link rel="prefetch" href="/assets/js/141.2620109f.js"><link rel="prefetch" href="/assets/js/142.d3c959d7.js"><link rel="prefetch" href="/assets/js/143.ccb1c30d.js"><link rel="prefetch" href="/assets/js/144.e1da893c.js"><link rel="prefetch" href="/assets/js/145.866c3c88.js"><link rel="prefetch" href="/assets/js/146.319b7be3.js"><link rel="prefetch" href="/assets/js/147.4cee0c15.js"><link rel="prefetch" href="/assets/js/148.2bd14175.js"><link rel="prefetch" href="/assets/js/149.6496304b.js"><link rel="prefetch" href="/assets/js/15.2cdd4d20.js"><link rel="prefetch" href="/assets/js/150.99757dbe.js"><link rel="prefetch" href="/assets/js/151.bc770b3a.js"><link rel="prefetch" href="/assets/js/152.84574147.js"><link rel="prefetch" href="/assets/js/153.f36a07f8.js"><link rel="prefetch" href="/assets/js/154.51509838.js"><link rel="prefetch" href="/assets/js/155.94421941.js"><link rel="prefetch" href="/assets/js/156.f9b6f28f.js"><link rel="prefetch" href="/assets/js/157.4d1c2919.js"><link rel="prefetch" href="/assets/js/158.1de997cb.js"><link rel="prefetch" href="/assets/js/159.fc708c4e.js"><link rel="prefetch" href="/assets/js/16.051b992c.js"><link rel="prefetch" href="/assets/js/160.c87c7b54.js"><link rel="prefetch" href="/assets/js/161.a133f90f.js"><link rel="prefetch" href="/assets/js/162.a732c87a.js"><link rel="prefetch" href="/assets/js/163.32b67bfe.js"><link rel="prefetch" href="/assets/js/164.dee22f11.js"><link rel="prefetch" href="/assets/js/165.142d330a.js"><link rel="prefetch" href="/assets/js/166.21956139.js"><link rel="prefetch" href="/assets/js/167.db92ec9e.js"><link rel="prefetch" href="/assets/js/168.62819333.js"><link rel="prefetch" href="/assets/js/169.e7fe2993.js"><link rel="prefetch" href="/assets/js/17.0e9ba23b.js"><link rel="prefetch" href="/assets/js/170.9d802926.js"><link rel="prefetch" href="/assets/js/171.5a9d0b5b.js"><link rel="prefetch" href="/assets/js/172.0a1aa852.js"><link rel="prefetch" href="/assets/js/173.8fa55916.js"><link rel="prefetch" href="/assets/js/174.cf9ff9fd.js"><link rel="prefetch" href="/assets/js/175.b488a737.js"><link rel="prefetch" href="/assets/js/176.69af9a1f.js"><link rel="prefetch" href="/assets/js/177.0d99b772.js"><link rel="prefetch" href="/assets/js/178.56070a29.js"><link rel="prefetch" href="/assets/js/179.930a7b27.js"><link rel="prefetch" href="/assets/js/18.22e56dd3.js"><link rel="prefetch" href="/assets/js/180.36b65619.js"><link rel="prefetch" href="/assets/js/181.d590c2a3.js"><link rel="prefetch" href="/assets/js/182.93adaf99.js"><link rel="prefetch" href="/assets/js/183.76edd4f9.js"><link rel="prefetch" href="/assets/js/184.bc4c9c72.js"><link rel="prefetch" href="/assets/js/185.4e67ab29.js"><link rel="prefetch" href="/assets/js/186.75843851.js"><link rel="prefetch" href="/assets/js/187.f242078f.js"><link rel="prefetch" href="/assets/js/188.f5d802df.js"><link rel="prefetch" href="/assets/js/189.f604d8f5.js"><link rel="prefetch" href="/assets/js/19.b623fcf5.js"><link rel="prefetch" href="/assets/js/190.5d7042e5.js"><link rel="prefetch" href="/assets/js/191.18719f12.js"><link rel="prefetch" href="/assets/js/192.cd8e40d9.js"><link rel="prefetch" href="/assets/js/193.53dc3d53.js"><link rel="prefetch" href="/assets/js/194.2a77cbd5.js"><link rel="prefetch" href="/assets/js/195.909b71ca.js"><link rel="prefetch" href="/assets/js/196.5526bb04.js"><link rel="prefetch" href="/assets/js/197.6b538479.js"><link rel="prefetch" href="/assets/js/198.047fdd63.js"><link rel="prefetch" href="/assets/js/199.7ed908f1.js"><link rel="prefetch" href="/assets/js/20.55162d3f.js"><link rel="prefetch" href="/assets/js/200.be028c8f.js"><link rel="prefetch" href="/assets/js/201.668b3064.js"><link rel="prefetch" href="/assets/js/202.f77a0727.js"><link rel="prefetch" href="/assets/js/203.3cff4357.js"><link rel="prefetch" href="/assets/js/204.24c12b7a.js"><link rel="prefetch" href="/assets/js/205.f7bd0473.js"><link rel="prefetch" href="/assets/js/206.64d27e35.js"><link rel="prefetch" href="/assets/js/207.eaf828c3.js"><link rel="prefetch" href="/assets/js/208.2062ae94.js"><link rel="prefetch" href="/assets/js/209.aa9bf1e0.js"><link rel="prefetch" href="/assets/js/21.7a5b4476.js"><link rel="prefetch" href="/assets/js/210.86c304ee.js"><link rel="prefetch" href="/assets/js/211.d857a04c.js"><link rel="prefetch" href="/assets/js/212.d7534303.js"><link rel="prefetch" href="/assets/js/213.8e1978aa.js"><link rel="prefetch" href="/assets/js/214.ca1161e6.js"><link rel="prefetch" href="/assets/js/215.b0dc94e4.js"><link rel="prefetch" href="/assets/js/216.f450df5c.js"><link rel="prefetch" href="/assets/js/217.0f12490d.js"><link rel="prefetch" href="/assets/js/218.508a29de.js"><link rel="prefetch" href="/assets/js/219.e69b16eb.js"><link rel="prefetch" href="/assets/js/22.5c2b80e9.js"><link rel="prefetch" href="/assets/js/220.5d564934.js"><link rel="prefetch" href="/assets/js/221.6a89543c.js"><link rel="prefetch" href="/assets/js/222.b93edcfd.js"><link rel="prefetch" href="/assets/js/223.7dc6c97f.js"><link rel="prefetch" href="/assets/js/224.ba6908f4.js"><link rel="prefetch" href="/assets/js/225.9604078f.js"><link rel="prefetch" href="/assets/js/226.6d9b0461.js"><link rel="prefetch" href="/assets/js/227.dcfcb5dc.js"><link rel="prefetch" href="/assets/js/23.49c8bfc7.js"><link rel="prefetch" href="/assets/js/24.02bf4a2b.js"><link rel="prefetch" href="/assets/js/25.1763a8e0.js"><link rel="prefetch" href="/assets/js/26.1e69ea79.js"><link rel="prefetch" href="/assets/js/27.0abb6565.js"><link rel="prefetch" href="/assets/js/28.1530f880.js"><link rel="prefetch" href="/assets/js/29.845231f7.js"><link rel="prefetch" href="/assets/js/3.2b538c87.js"><link rel="prefetch" href="/assets/js/30.fae3c0e1.js"><link rel="prefetch" href="/assets/js/31.845896c0.js"><link rel="prefetch" href="/assets/js/32.1b2ce2ff.js"><link rel="prefetch" href="/assets/js/33.29020420.js"><link rel="prefetch" href="/assets/js/34.e88d7ea4.js"><link rel="prefetch" href="/assets/js/35.a1311525.js"><link rel="prefetch" href="/assets/js/36.5acbccc7.js"><link rel="prefetch" href="/assets/js/37.f9df6853.js"><link rel="prefetch" href="/assets/js/38.5f232715.js"><link rel="prefetch" href="/assets/js/39.55cae9c0.js"><link rel="prefetch" href="/assets/js/4.bbf371be.js"><link rel="prefetch" href="/assets/js/40.c49c32e9.js"><link rel="prefetch" href="/assets/js/41.28356e71.js"><link rel="prefetch" href="/assets/js/42.74040176.js"><link rel="prefetch" href="/assets/js/43.a4c98b5a.js"><link rel="prefetch" href="/assets/js/44.52a6e3e6.js"><link rel="prefetch" href="/assets/js/45.663ca75c.js"><link rel="prefetch" href="/assets/js/46.f8dc5262.js"><link rel="prefetch" href="/assets/js/47.b7afad66.js"><link rel="prefetch" href="/assets/js/48.a41cb785.js"><link rel="prefetch" href="/assets/js/49.c76c1228.js"><link rel="prefetch" href="/assets/js/5.90f645f7.js"><link rel="prefetch" href="/assets/js/50.704ffb3c.js"><link rel="prefetch" href="/assets/js/51.8b87d865.js"><link rel="prefetch" href="/assets/js/52.7ce41a82.js"><link rel="prefetch" href="/assets/js/53.bfad3a7b.js"><link rel="prefetch" href="/assets/js/54.b48bf278.js"><link rel="prefetch" href="/assets/js/55.9b7eeec5.js"><link rel="prefetch" href="/assets/js/56.64b8fa90.js"><link rel="prefetch" href="/assets/js/57.1902d4ee.js"><link rel="prefetch" href="/assets/js/58.d9c62e32.js"><link rel="prefetch" href="/assets/js/59.18fa8742.js"><link rel="prefetch" href="/assets/js/6.107270e9.js"><link rel="prefetch" href="/assets/js/60.823e77b3.js"><link rel="prefetch" href="/assets/js/61.7b6164b8.js"><link rel="prefetch" href="/assets/js/62.3342d9f3.js"><link rel="prefetch" href="/assets/js/63.ba3c40ca.js"><link rel="prefetch" href="/assets/js/64.041a0153.js"><link rel="prefetch" href="/assets/js/65.41beffac.js"><link rel="prefetch" href="/assets/js/66.afb12f32.js"><link rel="prefetch" href="/assets/js/67.0b677783.js"><link rel="prefetch" href="/assets/js/68.caa512e5.js"><link rel="prefetch" href="/assets/js/69.7fb1c1d1.js"><link rel="prefetch" href="/assets/js/7.a965e367.js"><link rel="prefetch" href="/assets/js/70.7d06fb39.js"><link rel="prefetch" href="/assets/js/71.6f04fdbc.js"><link rel="prefetch" href="/assets/js/72.e0c5b95b.js"><link rel="prefetch" href="/assets/js/73.34a9613e.js"><link rel="prefetch" href="/assets/js/74.03905149.js"><link rel="prefetch" href="/assets/js/75.60502991.js"><link rel="prefetch" href="/assets/js/76.23c9284d.js"><link rel="prefetch" href="/assets/js/77.31452bfd.js"><link rel="prefetch" href="/assets/js/78.3c2094b6.js"><link rel="prefetch" href="/assets/js/8.d67d4918.js"><link rel="prefetch" href="/assets/js/80.918fec7f.js"><link rel="prefetch" href="/assets/js/81.00d011b3.js"><link rel="prefetch" href="/assets/js/82.5fc97ea7.js"><link rel="prefetch" href="/assets/js/83.ba804592.js"><link rel="prefetch" href="/assets/js/84.e383f726.js"><link rel="prefetch" href="/assets/js/85.eb7d4c90.js"><link rel="prefetch" href="/assets/js/86.3b8d698b.js"><link rel="prefetch" href="/assets/js/87.5acef679.js"><link rel="prefetch" href="/assets/js/88.41bcfeb2.js"><link rel="prefetch" href="/assets/js/89.2fdf9d9e.js"><link rel="prefetch" href="/assets/js/9.89f4b9ba.js"><link rel="prefetch" href="/assets/js/90.4d2dc082.js"><link rel="prefetch" href="/assets/js/91.41c7ef74.js"><link rel="prefetch" href="/assets/js/92.acd70287.js"><link rel="prefetch" href="/assets/js/93.193acde5.js"><link rel="prefetch" href="/assets/js/94.7e19245c.js"><link rel="prefetch" href="/assets/js/95.bc55755e.js"><link rel="prefetch" href="/assets/js/96.21b7facc.js"><link rel="prefetch" href="/assets/js/97.26e99d3a.js"><link rel="prefetch" href="/assets/js/98.d6734ffb.js"><link rel="prefetch" href="/assets/js/99.61b5b0d6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b4651a08.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">å°è¿¹</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><a href="/guide/" class="nav-link">å¤§çº²</a></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  External
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><a href="/guide/" class="nav-link">å¤§çº²</a></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  External
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>JavaScriptåŸºç¡€</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/javascript/basic.html" class="sidebar-link">å˜é‡å’Œç±»å‹</a></li><li><a href="/guide/javascript/prototype.html" class="sidebar-link">JavaScriptæ˜¯å¦‚ä½•è®¾è®¡é¢å‘å¯¹è±¡çš„ï¼Ÿ</a></li><li><a href="/guide/javascript/closure.html" class="sidebar-link">é—­åŒ…</a></li><li><a href="/guide/javascript/es6.html" class="sidebar-link">ES6</a></li><li><a href="/guide/javascript/npm.html" class="sidebar-link">npmå‘å¸ƒ</a></li><li><a href="/guide/javascript/module.html" class="sidebar-link">æ¨¡å—åŒ–</a></li><li><a href="/guide/javascript/jwt.html" class="sidebar-link">JSON WEBä»¤ç‰Œ</a></li><li><a href="/guide/javascript/node.html" class="sidebar-link">Node</a></li><li><a href="/guide/javascript/promise.html" class="sidebar-link">Promise</a></li><li><a href="/guide/javascript/typescript.html" class="sidebar-link">TypeScript</a></li><li><a href="/guide/javascript/arrayBuffer.html" class="sidebar-link">æ–‡ä»¶ä¸Šä¼ </a></li><li><a href="/guide/javascript/js.html" class="sidebar-link">jsè¿è¡Œæœºåˆ¶</a></li><li><a href="/guide/javascript/regular-expression.html" class="sidebar-link">æ­£åˆ™</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>HTML</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/html/canvas.html" class="sidebar-link">canvas</a></li><li><a href="/guide/html/flexible.html" class="sidebar-link">flexible</a></li><li><a href="/guide/html/formData.html" class="sidebar-link">formData</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>CSS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/css/gradient.html" class="sidebar-link">æ¸å˜</a></li><li><a href="/guide/css/flex.html" class="sidebar-link">flexå¸ƒå±€</a></li><li><a href="/guide/css/animation.html" class="sidebar-link">cssåŠ¨ç”»</a></li><li><a href="/guide/css/layout.html" class="sidebar-link">csså¸ƒå±€</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>VUE</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/vue/jsx.html" class="sidebar-link">renderå‡½æ•°å’Œjsx</a></li><li><a href="/guide/vue/vue.html" class="sidebar-link">VUEæ‚è°ˆ</a></li><li><a href="/guide/vue/vue-source-code1.html" class="sidebar-link">VUEæºç 1</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>REACT</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/react/react.html" class="sidebar-link">react</a></li><li><a href="/guide/react/taro.html" class="sidebar-link">taroæ¡†æ¶</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Docker</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/docker/1.docker.html" class="sidebar-link">DockeråŸºç¡€</a></li><li><a href="/guide/docker/2.image.html" class="sidebar-link">é•œåƒ</a></li><li><a href="/guide/docker/3.container.html" class="sidebar-link">å®¹å™¨</a></li><li><a href="/guide/docker/4.docker-volume.html" class="sidebar-link">dockeræ•°æ®ç®¡ç†</a></li><li><a href="/guide/docker/5.dockerfile.html" class="sidebar-link">dockerfile</a></li><li><a href="/guide/docker/7.lnmp.html" class="sidebar-link">lnmpç¯å¢ƒ</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Jenkins</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/jenkins/jenkins.html" class="sidebar-link">jenkin</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Webpack</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/webpack/webpack.html" class="sidebar-link">webpack</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>å…¬å…±</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/universal/cryptography.html" class="sidebar-link">å¯†ç å­¦</a></li><li><a href="/guide/markdown-demo.html" class="sidebar-link">markdownç”¨ä¾‹</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="http-proxy-middleware"><a href="#http-proxy-middleware" class="header-anchor">#</a> http-proxy-middleware</h1> <p><a href="https://travis-ci.org/chimurai/http-proxy-middleware" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/travis/chimurai/http-proxy-middleware/master.svg?style=flat-square" alt="Build Status"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://coveralls.io/r/chimurai/http-proxy-middleware" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/coveralls/chimurai/http-proxy-middleware.svg?style=flat-square" alt="Coveralls"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://david-dm.org/chimurai/http-proxy-middleware#info=dependencies" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/david/chimurai/http-proxy-middleware.svg?style=flat-square" alt="dependency Status"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://snyk.io/test/npm/http-proxy-middleware" target="_blank" rel="noopener noreferrer"><img src="https://snyk.io/test/npm/http-proxy-middleware/badge.svg?style=flat-square" alt="dependency Status"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://github.com/prettier/prettier" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/badge/code_style-prettier-ff69b4.svg?style=flat-square" alt="code style: prettier"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Node.js proxying made simple. Configure proxy middleware with ease for <a href="https://github.com/senchalabs/connect" target="_blank" rel="noopener noreferrer">connect<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, <a href="https://github.com/strongloop/express" target="_blank" rel="noopener noreferrer">express<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, <a href="https://github.com/BrowserSync/browser-sync" target="_blank" rel="noopener noreferrer">browser-sync<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and <a href="#compatible-servers">many more</a>.</p> <p>Powered by the popular Nodejitsu <a href="https://github.com/nodejitsu/node-http-proxy" target="_blank" rel="noopener noreferrer"><code>http-proxy</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. <a href="https://github.com/nodejitsu/node-http-proxy" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/github/stars/nodejitsu/node-http-proxy.svg?style=social&amp;label=Star" alt="GitHub stars"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="âš ï¸-note"><a href="#âš ï¸-note" class="header-anchor">#</a> âš ï¸ Note</h2> <p>This page is showing documentation for version v1.x.x (<a href="https://github.com/chimurai/http-proxy-middleware/releases" target="_blank" rel="noopener noreferrer">release notes<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>)</p> <p>If you're looking for v0.x documentation. Go to:
https://github.com/chimurai/http-proxy-middleware/tree/v0.21.0#readme</p> <h2 id="tl-dr"><a href="#tl-dr" class="header-anchor">#</a> TL;DR</h2> <p>Proxy <code>/api</code> requests to <code>http://www.example.org</code></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// javascript</span>

<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> createProxyMiddleware <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http-proxy-middleware'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/api'</span><span class="token punctuation">,</span> <span class="token function">createProxyMiddleware</span><span class="token punctuation">(</span><span class="token punctuation">{</span> target<span class="token punctuation">:</span> <span class="token string">'http://www.example.org'</span><span class="token punctuation">,</span> changeOrigin<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// http://localhost:3000/api/foo/bar -&gt; http://www.example.org/api/foo/bar</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// typescript</span>

<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> express <span class="token keyword">from</span> <span class="token string">'express'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createProxyMiddleware<span class="token punctuation">,</span> Filter<span class="token punctuation">,</span> Options<span class="token punctuation">,</span> RequestHandler <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'http-proxy-middleware'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/api'</span><span class="token punctuation">,</span> <span class="token function">createProxyMiddleware</span><span class="token punctuation">(</span><span class="token punctuation">{</span> target<span class="token punctuation">:</span> <span class="token string">'http://www.example.org'</span><span class="token punctuation">,</span> changeOrigin<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// http://localhost:3000/api/foo/bar -&gt; http://www.example.org/api/foo/bar</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><em>All</em> <code>http-proxy</code> <a href="https://github.com/nodejitsu/node-http-proxy#options" target="_blank" rel="noopener noreferrer">options<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> can be used, along with some extra <code>http-proxy-middleware</code> <a href="#options">options</a>.</p> <p>ğŸ’¡ <strong>Tip:</strong> Set the option <code>changeOrigin</code> to <code>true</code> for <a href="http://en.wikipedia.org/wiki/Virtual_hosting#Name-based" target="_blank" rel="noopener noreferrer">name-based virtual hosted sites<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h2 id="table-of-contents"><a href="#table-of-contents" class="header-anchor">#</a> Table of Contents</h2> <ul><li><a href="#install">Install</a></li> <li><a href="#core-concept">Core concept</a></li> <li><a href="#example">Example</a></li> <li><a href="#context-matching">Context matching</a></li> <li><a href="#options">Options</a> <ul><li><a href="#http-proxy-middleware-options">http-proxy-middleware options</a></li> <li><a href="#http-proxy-events">http-proxy events</a></li> <li><a href="#http-proxy-options">http-proxy options</a></li></ul></li> <li><a href="#shorthand">Shorthand</a> <ul><li><a href="#appusepath-proxy">app.use(path, proxy)</a></li></ul></li> <li><a href="#websocket">WebSocket</a> <ul><li><a href="#external-websocket-upgrade">External WebSocket upgrade</a></li></ul></li> <li><a href="#working-examples">Working examples</a></li> <li><a href="#recipes">Recipes</a></li> <li><a href="#compatible-servers">Compatible servers</a></li> <li><a href="#tests">Tests</a></li> <li><a href="#changelog">Changelog</a></li> <li><a href="#license">License</a></li></ul> <h2 id="install"><a href="#install" class="header-anchor">#</a> Install</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">npm</span> <span class="token function">install</span> --save-dev http-proxy-middleware
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="core-concept"><a href="#core-concept" class="header-anchor">#</a> Core concept</h2> <p>Proxy middleware configuration.</p> <h4 id="createproxymiddleware-context-config"><a href="#createproxymiddleware-context-config" class="header-anchor">#</a> createProxyMiddleware([context,] config)</h4> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> createProxyMiddleware <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http-proxy-middleware'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> apiProxy <span class="token operator">=</span> <span class="token function">createProxyMiddleware</span><span class="token punctuation">(</span><span class="token string">'/api'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> target<span class="token punctuation">:</span> <span class="token string">'http://www.example.org'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//                                    \____/   \_____________________________/</span>
<span class="token comment">//                                      |                    |</span>
<span class="token comment">//                                    context             options</span>

<span class="token comment">// 'apiProxy' is now ready to be used as middleware in a server.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li><strong>context</strong>: Determine which requests should be proxied to the target host.
(more on <a href="#context-matching">context matching</a>)</li> <li><strong>options.target</strong>: target host to proxy to. <em>(protocol + host)</em></li></ul> <p>(full list of <a href="#options"><code>http-proxy-middleware</code> configuration options</a>)</p> <h4 id="createproxymiddleware-uri-config"><a href="#createproxymiddleware-uri-config" class="header-anchor">#</a> createProxyMiddleware(uri [, config])</h4> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// shorthand syntax for the example above:</span>
<span class="token keyword">const</span> apiProxy <span class="token operator">=</span> <span class="token function">createProxyMiddleware</span><span class="token punctuation">(</span><span class="token string">'http://www.example.org/api'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>More about the <a href="#shorthand">shorthand configuration</a>.</p> <h2 id="example"><a href="#example" class="header-anchor">#</a> Example</h2> <p>An example with <code>express</code> server.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// include dependencies</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> createProxyMiddleware <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http-proxy-middleware'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// proxy middleware options</span>
<span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
  target<span class="token punctuation">:</span> <span class="token string">'http://www.example.org'</span><span class="token punctuation">,</span> <span class="token comment">// target host</span>
  changeOrigin<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// needed for virtual hosted sites</span>
  ws<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// proxy websockets</span>
  pathRewrite<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">'^/api/old-path'</span><span class="token punctuation">:</span> <span class="token string">'/api/new-path'</span><span class="token punctuation">,</span> <span class="token comment">// rewrite path</span>
    <span class="token string">'^/api/remove/path'</span><span class="token punctuation">:</span> <span class="token string">'/path'</span> <span class="token comment">// remove base path</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  router<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// when request.headers.host == 'dev.localhost:3000',</span>
    <span class="token comment">// override target 'http://www.example.org' to 'http://localhost:8000'</span>
    <span class="token string">'dev.localhost:3000'</span><span class="token punctuation">:</span> <span class="token string">'http://localhost:8000'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// create the proxy (without context)</span>
<span class="token keyword">const</span> exampleProxy <span class="token operator">=</span> <span class="token function">createProxyMiddleware</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// mount `exampleProxy` in web server</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/api'</span><span class="token punctuation">,</span> exampleProxy<span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h2 id="context-matching"><a href="#context-matching" class="header-anchor">#</a> Context matching</h2> <p>Providing an alternative way to decide which requests should be proxied; In case you are not able to use the server's <a href="http://expressjs.com/en/4x/api.html#app.use" target="_blank" rel="noopener noreferrer"><code>path</code> parameter<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to mount the proxy or when you need more flexibility.</p> <p><a href="https://tools.ietf.org/html/rfc3986#section-3.3" target="_blank" rel="noopener noreferrer">RFC 3986 <code>path</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is used for context matching.</p> <div class="language-ascii line-numbers-mode"><pre class="language-text"><code>         foo://example.com:8042/over/there?name=ferret#nose
         \_/   \______________/\_________/ \_________/ \__/
          |           |            |            |        |
       scheme     authority       path        query   fragment
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li><p><strong>path matching</strong></p> <ul><li><code>createProxyMiddleware({...})</code> - matches any path, all requests will be proxied.</li> <li><code>createProxyMiddleware('/', {...})</code> - matches any path, all requests will be proxied.</li> <li><code>createProxyMiddleware('/api', {...})</code> - matches paths starting with <code>/api</code></li></ul></li> <li><p><strong>multiple path matching</strong></p> <ul><li><code>createProxyMiddleware(['/api', '/ajax', '/someotherpath'], {...})</code></li></ul></li> <li><p><strong>wildcard path matching</strong></p> <p>For fine-grained control you can use wildcard matching. Glob pattern matching is done by <em>micromatch</em>. Visit <a href="https://www.npmjs.com/package/micromatch" target="_blank" rel="noopener noreferrer">micromatch<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> or <a href="https://www.npmjs.com/package/glob" target="_blank" rel="noopener noreferrer">glob<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for more globbing examples.</p> <ul><li><code>createProxyMiddleware('**', {...})</code> matches any path, all requests will be proxied.</li> <li><code>createProxyMiddleware('**/*.html', {...})</code> matches any path which ends with <code>.html</code></li> <li><code>createProxyMiddleware('/*.html', {...})</code> matches paths directly under path-absolute</li> <li><code>createProxyMiddleware('/api/**/*.html', {...})</code> matches requests ending with <code>.html</code> in the path of <code>/api</code></li> <li><code>createProxyMiddleware(['/api/**', '/ajax/**'], {...})</code> combine multiple patterns</li> <li><code>createProxyMiddleware(['/api/**', '!**/bad.json'], {...})</code> exclusion</li></ul> <p><strong>Note</strong>: In multiple path matching, you cannot use string paths and wildcard paths together.</p></li> <li><p><strong>custom matching</strong></p> <p>For full control you can provide a custom function to determine which requests should be proxied or not.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/**
 * @return {Boolean}
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">filter</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">pathname<span class="token punctuation">,</span> req</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> pathname<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token string">'^/api'</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> req<span class="token punctuation">.</span>method <span class="token operator">===</span> <span class="token string">'GET'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> apiProxy <span class="token operator">=</span> <span class="token function">createProxyMiddleware</span><span class="token punctuation">(</span>filter<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  target<span class="token punctuation">:</span> <span class="token string">'http://www.example.org'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li></ul> <h2 id="options"><a href="#options" class="header-anchor">#</a> Options</h2> <h3 id="http-proxy-middleware-options"><a href="#http-proxy-middleware-options" class="header-anchor">#</a> http-proxy-middleware options</h3> <ul><li><p><strong>option.pathRewrite</strong>: object/function, rewrite target's url path. Object-keys will be used as <em>RegExp</em> to match paths.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// rewrite path</span>
pathRewrite<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'^/old/api'</span> <span class="token punctuation">:</span> <span class="token string">'/new/api'</span><span class="token punctuation">}</span>

<span class="token comment">// remove path</span>
pathRewrite<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'^/remove/api'</span> <span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">}</span>

<span class="token comment">// add base path</span>
pathRewrite<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'^/'</span> <span class="token punctuation">:</span> <span class="token string">'/basepath/'</span><span class="token punctuation">}</span>

<span class="token comment">// custom rewriting</span>
<span class="token function-variable function">pathRewrite</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">path<span class="token punctuation">,</span> req</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> path<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'/api'</span><span class="token punctuation">,</span> <span class="token string">'/base/api'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>

<span class="token comment">// custom rewriting, returning Promise</span>
<span class="token function-variable function">pathRewrite</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">path<span class="token punctuation">,</span> req</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> should_add_something <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">httpRequestToDecideSomething</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>should_add_something<span class="token punctuation">)</span> path <span class="token operator">+=</span> <span class="token string">&quot;something&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> path<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></li> <li><p><strong>option.router</strong>: object/function, re-target <code>option.target</code> for specific requests.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// Use `host` and/or `path` to match requests. First match will be used.</span>
<span class="token comment">// The order of the configuration matters.</span>
router<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">'integration.localhost:3000'</span> <span class="token punctuation">:</span> <span class="token string">'http://localhost:8001'</span><span class="token punctuation">,</span>  <span class="token comment">// host only</span>
    <span class="token string">'staging.localhost:3000'</span>     <span class="token punctuation">:</span> <span class="token string">'http://localhost:8002'</span><span class="token punctuation">,</span>  <span class="token comment">// host only</span>
    <span class="token string">'localhost:3000/api'</span>         <span class="token punctuation">:</span> <span class="token string">'http://localhost:8003'</span><span class="token punctuation">,</span>  <span class="token comment">// host + path</span>
    <span class="token string">'/rest'</span>                      <span class="token punctuation">:</span> <span class="token string">'http://localhost:8004'</span>   <span class="token comment">// path only</span>
<span class="token punctuation">}</span>

<span class="token comment">// Custom router function (string target)</span>
<span class="token function-variable function">router</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'http://localhost:8004'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Custom router function (target object)</span>
<span class="token function-variable function">router</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        protocol<span class="token punctuation">:</span> <span class="token string">'https:'</span><span class="token punctuation">,</span> <span class="token comment">// The : is required</span>
        host<span class="token punctuation">:</span> <span class="token string">'localhost'</span><span class="token punctuation">,</span>
        port<span class="token punctuation">:</span> <span class="token number">8004</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Asynchronous router function which returns promise</span>
<span class="token function-variable function">router</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">doSomeIO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> url<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div></li> <li><p><strong>option.logLevel</strong>: string, ['debug', 'info', 'warn', 'error', 'silent']. Default: <code>'info'</code></p></li> <li><p><strong>option.logProvider</strong>: function, modify or replace log provider. Default: <code>console</code>.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// simple replace</span>
<span class="token keyword">function</span> <span class="token function">logProvider</span><span class="token punctuation">(</span><span class="token parameter">provider</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// replace the default console log provider.</span>
  <span class="token keyword">return</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'winston'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// verbose replacement</span>
<span class="token keyword">function</span> <span class="token function">logProvider</span><span class="token punctuation">(</span><span class="token parameter">provider</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> logger <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'winston'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Logger<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> myCustomProvider <span class="token operator">=</span> <span class="token punctuation">{</span>
    log<span class="token punctuation">:</span> logger<span class="token punctuation">.</span>log<span class="token punctuation">,</span>
    debug<span class="token punctuation">:</span> logger<span class="token punctuation">.</span>debug<span class="token punctuation">,</span>
    info<span class="token punctuation">:</span> logger<span class="token punctuation">.</span>info<span class="token punctuation">,</span>
    warn<span class="token punctuation">:</span> logger<span class="token punctuation">.</span>warn<span class="token punctuation">,</span>
    error<span class="token punctuation">:</span> logger<span class="token punctuation">.</span>error
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> myCustomProvider<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li></ul> <h3 id="http-proxy-events"><a href="#http-proxy-events" class="header-anchor">#</a> http-proxy events</h3> <p>Subscribe to <a href="https://github.com/nodejitsu/node-http-proxy#listening-for-proxy-events" target="_blank" rel="noopener noreferrer">http-proxy events<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>:</p> <ul><li><p><strong>option.onError</strong>: function, subscribe to http-proxy's <code>error</code> event for custom error handling.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">onError</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'text/plain'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'Something went wrong. And we are reporting a custom error message.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p><strong>option.onProxyRes</strong>: function, subscribe to http-proxy's <code>proxyRes</code> event.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">onProxyRes</span><span class="token punctuation">(</span><span class="token parameter">proxyRes<span class="token punctuation">,</span> req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  proxyRes<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'x-added'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'foobar'</span><span class="token punctuation">;</span> <span class="token comment">// add new header to response</span>
  <span class="token keyword">delete</span> proxyRes<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'x-removed'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// remove header from response</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p><strong>option.onProxyReq</strong>: function, subscribe to http-proxy's <code>proxyReq</code> event.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">onProxyReq</span><span class="token punctuation">(</span><span class="token parameter">proxyReq<span class="token punctuation">,</span> req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// add custom header to request</span>
  proxyReq<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'x-added'</span><span class="token punctuation">,</span> <span class="token string">'foobar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// or log the req</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p><strong>option.onProxyReqWs</strong>: function, subscribe to http-proxy's <code>proxyReqWs</code> event.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">onProxyReqWs</span><span class="token punctuation">(</span><span class="token parameter">proxyReq<span class="token punctuation">,</span> req<span class="token punctuation">,</span> socket<span class="token punctuation">,</span> options<span class="token punctuation">,</span> head</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// add custom header</span>
  proxyReq<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'X-Special-Proxy-Header'</span><span class="token punctuation">,</span> <span class="token string">'foobar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p><strong>option.onOpen</strong>: function, subscribe to http-proxy's <code>open</code> event.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">onOpen</span><span class="token punctuation">(</span><span class="token parameter">proxySocket</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// listen for messages coming FROM the target here</span>
  proxySocket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> hybiParseAndLogMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p><strong>option.onClose</strong>: function, subscribe to http-proxy's <code>close</code> event.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">onClose</span><span class="token punctuation">(</span><span class="token parameter">res<span class="token punctuation">,</span> socket<span class="token punctuation">,</span> head</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// view disconnected websocket connections</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Client disconnected'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul> <h3 id="http-proxy-options"><a href="#http-proxy-options" class="header-anchor">#</a> http-proxy options</h3> <p>The following options are provided by the underlying <a href="https://github.com/nodejitsu/node-http-proxy#options" target="_blank" rel="noopener noreferrer">http-proxy<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> library.</p> <ul><li><p><strong>option.target</strong>: url string to be parsed with the url module</p></li> <li><p><strong>option.forward</strong>: url string to be parsed with the url module</p></li> <li><p><strong>option.agent</strong>: object to be passed to http(s).request (see Node's <a href="http://nodejs.org/api/https.html#https_class_https_agent" target="_blank" rel="noopener noreferrer">https agent<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and <a href="http://nodejs.org/api/http.html#http_class_http_agent" target="_blank" rel="noopener noreferrer">http agent<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> objects)</p></li> <li><p><strong>option.ssl</strong>: object to be passed to https.createServer()</p></li> <li><p><strong>option.ws</strong>: true/false: if you want to proxy websockets</p></li> <li><p><strong>option.xfwd</strong>: true/false, adds x-forward headers</p></li> <li><p><strong>option.secure</strong>: true/false, if you want to verify the SSL Certs</p></li> <li><p><strong>option.toProxy</strong>: true/false, passes the absolute URL as the <code>path</code> (useful for proxying to proxies)</p></li> <li><p><strong>option.prependPath</strong>: true/false, Default: true - specify whether you want to prepend the target's path to the proxy path</p></li> <li><p><strong>option.ignorePath</strong>: true/false, Default: false - specify whether you want to ignore the proxy path of the incoming request (note: you will have to append / manually if required).</p></li> <li><p><strong>option.localAddress</strong> : Local interface string to bind for outgoing connections</p></li> <li><p><strong>option.changeOrigin</strong>: true/false, Default: false - changes the origin of the host header to the target URL</p></li> <li><p><strong>option.preserveHeaderKeyCase</strong>: true/false, Default: false - specify whether you want to keep letter case of response header key</p></li> <li><p><strong>option.auth</strong> : Basic authentication i.e. 'user:password' to compute an Authorization header.</p></li> <li><p><strong>option.hostRewrite</strong>: rewrites the location hostname on (301/302/307/308) redirects.</p></li> <li><p><strong>option.autoRewrite</strong>: rewrites the location host/port on (301/302/307/308) redirects based on requested host/port. Default: false.</p></li> <li><p><strong>option.protocolRewrite</strong>: rewrites the location protocol on (301/302/307/308) redirects to 'http' or 'https'. Default: null.</p></li> <li><p><strong>option.cookieDomainRewrite</strong>: rewrites domain of <code>set-cookie</code> headers. Possible values:</p> <ul><li><code>false</code> (default): disable cookie rewriting</li> <li>String: new domain, for example <code>cookieDomainRewrite: &quot;new.domain&quot;</code>. To remove the domain, use <code>cookieDomainRewrite: &quot;&quot;</code>.</li> <li>Object: mapping of domains to new domains, use <code>&quot;*&quot;</code> to match all domains.<br>
For example keep one domain unchanged, rewrite one domain and remove other domains:<div class="language-json line-numbers-mode"><pre class="language-json"><code>cookieDomainRewrite<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;unchanged.domain&quot;</span><span class="token operator">:</span> <span class="token string">&quot;unchanged.domain&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;old.domain&quot;</span><span class="token operator">:</span> <span class="token string">&quot;new.domain&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;*&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul></li> <li><p><strong>option.cookiePathRewrite</strong>: rewrites path of <code>set-cookie</code> headers. Possible values:</p> <ul><li><code>false</code> (default): disable cookie rewriting</li> <li>String: new path, for example <code>cookiePathRewrite: &quot;/newPath/&quot;</code>. To remove the path, use <code>cookiePathRewrite: &quot;&quot;</code>. To set path to root use <code>cookiePathRewrite: &quot;/&quot;</code>.</li> <li>Object: mapping of paths to new paths, use <code>&quot;*&quot;</code> to match all paths.
For example, to keep one path unchanged, rewrite one path and remove other paths:<div class="language-json line-numbers-mode"><pre class="language-json"><code>cookiePathRewrite<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;/unchanged.path/&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/unchanged.path/&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;/old.path/&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/new.path/&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;*&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul></li> <li><p><strong>option.headers</strong>: object, adds <a href="https://en.wikipedia.org/wiki/List_of_HTTP_header_fields#Request_fields" target="_blank" rel="noopener noreferrer">request headers<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. (Example: <code>{host:'www.example.org'}</code>)</p></li> <li><p><strong>option.proxyTimeout</strong>: timeout (in millis) when proxy receives no response from target</p></li> <li><p><strong>option.timeout</strong>: timeout (in millis) for incoming requests</p></li> <li><p><strong>option.followRedirects</strong>: true/false, Default: false - specify whether you want to follow redirects</p></li> <li><p><strong>option.selfHandleResponse</strong> true/false, if set to true, none of the webOutgoing passes are called and it's your responsibility to appropriately return the response by listening and acting on the <code>proxyRes</code> event</p></li> <li><p><strong>option.buffer</strong>: stream of data to send as the request body. Maybe you have some middleware that consumes the request stream before proxying it on e.g. If you read the body of a request into a field called 'req.rawbody' you could restream this field in the buffer option:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token string">'use strict'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> streamify <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'stream-array'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HttpProxy <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http-proxy'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  proxy<span class="token punctuation">.</span><span class="token function">web</span><span class="token punctuation">(</span>
    req<span class="token punctuation">,</span>
    res<span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      target<span class="token punctuation">:</span> <span class="token string">'http://localhost:4003/'</span><span class="token punctuation">,</span>
      buffer<span class="token punctuation">:</span> <span class="token function">streamify</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>rawBody<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    next
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></li></ul> <h2 id="shorthand"><a href="#shorthand" class="header-anchor">#</a> Shorthand</h2> <p>Use the shorthand syntax when verbose configuration is not needed. The <code>context</code> and <code>option.target</code> will be automatically configured when shorthand is used. Options can still be used if needed.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">createProxyMiddleware</span><span class="token punctuation">(</span><span class="token string">'http://www.example.org:8000/api'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// createProxyMiddleware('/api', {target: 'http://www.example.org:8000'});</span>

<span class="token function">createProxyMiddleware</span><span class="token punctuation">(</span><span class="token string">'http://www.example.org:8000/api/books/*/**.json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// createProxyMiddleware('/api/books/*/**.json', {target: 'http://www.example.org:8000'});</span>

<span class="token function">createProxyMiddleware</span><span class="token punctuation">(</span><span class="token string">'http://www.example.org:8000/api'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> changeOrigin<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// createProxyMiddleware('/api', {target: 'http://www.example.org:8000', changeOrigin: true});</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="app-use-path-proxy"><a href="#app-use-path-proxy" class="header-anchor">#</a> app.use(path, proxy)</h3> <p>If you want to use the server's <code>app.use</code> <code>path</code> parameter to match requests;
Create and mount the proxy without the http-proxy-middleware <code>context</code> parameter:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/api'</span><span class="token punctuation">,</span> <span class="token function">createProxyMiddleware</span><span class="token punctuation">(</span><span class="token punctuation">{</span> target<span class="token punctuation">:</span> <span class="token string">'http://www.example.org'</span><span class="token punctuation">,</span> changeOrigin<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>app.use</code> documentation:</p> <ul><li>express: http://expressjs.com/en/4x/api.html#app.use</li> <li>connect: https://github.com/senchalabs/connect#mount-middleware</li> <li>polka: https://github.com/lukeed/polka#usebase-fn</li></ul> <h2 id="websocket"><a href="#websocket" class="header-anchor">#</a> WebSocket</h2> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// verbose api</span>
<span class="token function">createProxyMiddleware</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> target<span class="token punctuation">:</span> <span class="token string">'http://echo.websocket.org'</span><span class="token punctuation">,</span> ws<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// shorthand</span>
<span class="token function">createProxyMiddleware</span><span class="token punctuation">(</span><span class="token string">'http://echo.websocket.org'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> ws<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// shorter shorthand</span>
<span class="token function">createProxyMiddleware</span><span class="token punctuation">(</span><span class="token string">'ws://echo.websocket.org'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="external-websocket-upgrade"><a href="#external-websocket-upgrade" class="header-anchor">#</a> External WebSocket upgrade</h3> <p>In the previous WebSocket examples, http-proxy-middleware relies on a initial http request in order to listen to the http <code>upgrade</code> event. If you need to proxy WebSockets without the initial http request, you can subscribe to the server's http <code>upgrade</code> event manually.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> wsProxy <span class="token operator">=</span> <span class="token function">createProxyMiddleware</span><span class="token punctuation">(</span><span class="token string">'ws://echo.websocket.org'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> changeOrigin<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>wsProxy<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> server <span class="token operator">=</span> app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
server<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'upgrade'</span><span class="token punctuation">,</span> wsProxy<span class="token punctuation">.</span>upgrade<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;-- subscribe to http 'upgrade'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="working-examples"><a href="#working-examples" class="header-anchor">#</a> Working examples</h2> <p>View and play around with <a href="https://github.com/chimurai/http-proxy-middleware/tree/master/examples" target="_blank" rel="noopener noreferrer">working examples<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <ul><li>Browser-Sync (<a href="https://github.com/chimurai/http-proxy-middleware/tree/master/examples/browser-sync/index.js" target="_blank" rel="noopener noreferrer">example source<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>)</li> <li>express (<a href="https://github.com/chimurai/http-proxy-middleware/tree/master/examples/express/index.js" target="_blank" rel="noopener noreferrer">example source<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>)</li> <li>connect (<a href="https://github.com/chimurai/http-proxy-middleware/tree/master/examples/connect/index.js" target="_blank" rel="noopener noreferrer">example source<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>)</li> <li>WebSocket (<a href="https://github.com/chimurai/http-proxy-middleware/tree/master/examples/websocket/index.js" target="_blank" rel="noopener noreferrer">example source<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>)</li></ul> <h2 id="recipes"><a href="#recipes" class="header-anchor">#</a> Recipes</h2> <p>View the <a href="https://github.com/chimurai/http-proxy-middleware/tree/master/recipes" target="_blank" rel="noopener noreferrer">recipes<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for common use cases.</p> <h2 id="compatible-servers"><a href="#compatible-servers" class="header-anchor">#</a> Compatible servers</h2> <p><code>http-proxy-middleware</code> is compatible with the following servers:</p> <ul><li><a href="https://www.npmjs.com/package/connect" target="_blank" rel="noopener noreferrer">connect<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.npmjs.com/package/express" target="_blank" rel="noopener noreferrer">express<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.npmjs.com/package/browser-sync" target="_blank" rel="noopener noreferrer">browser-sync<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.npmjs.com/package/lite-server" target="_blank" rel="noopener noreferrer">lite-server<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/lukeed/polka" target="_blank" rel="noopener noreferrer">polka<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.npmjs.com/package/grunt-contrib-connect" target="_blank" rel="noopener noreferrer">grunt-contrib-connect<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.npmjs.com/package/grunt-browser-sync" target="_blank" rel="noopener noreferrer">grunt-browser-sync<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.npmjs.com/package/gulp-connect" target="_blank" rel="noopener noreferrer">gulp-connect<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.npmjs.com/package/gulp-webserver" target="_blank" rel="noopener noreferrer">gulp-webserver<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>Sample implementations can be found in the <a href="https://github.com/chimurai/http-proxy-middleware/tree/master/recipes/servers.md" target="_blank" rel="noopener noreferrer">server recipes<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h2 id="tests"><a href="#tests" class="header-anchor">#</a> Tests</h2> <p>Run the test suite:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># install dependencies</span>
$ <span class="token function">yarn</span>

<span class="token comment"># linting</span>
$ <span class="token function">yarn</span> lint
$ <span class="token function">yarn</span> lint:fix

<span class="token comment"># building (compile typescript to js)</span>
$ <span class="token function">yarn</span> build

<span class="token comment"># unit tests</span>
$ <span class="token function">yarn</span> <span class="token builtin class-name">test</span>

<span class="token comment"># code coverage</span>
$ <span class="token function">yarn</span> cover
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="changelog"><a href="#changelog" class="header-anchor">#</a> Changelog</h2> <ul><li><a href="https://github.com/chimurai/http-proxy-middleware/blob/master/CHANGELOG.md" target="_blank" rel="noopener noreferrer">View changelog<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h2 id="license"><a href="#license" class="header-anchor">#</a> License</h2> <p>The MIT License (MIT)</p> <p>Copyright (c) 2015-2020 Steven Chim</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.00dc6386.js" defer></script><script src="/assets/js/2.bcfa727d.js" defer></script><script src="/assets/js/79.7672e30b.js" defer></script>
  </body>
</html>
